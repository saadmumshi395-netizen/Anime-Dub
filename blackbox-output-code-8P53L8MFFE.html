<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime Hub</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; }
        header { background-color: #333; color: white; padding: 1rem; text-align: center; }
        nav { margin-top: 1rem; }
        nav a { color: white; margin: 0 1rem; text-decoration: none; }
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        .anime-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; }
        .anime-card { background: white; padding: 1rem; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); text-align: center; }
        .anime-card img { width: 100%; height: 200px; object-fit: cover; border-radius: 4px; }
        form { max-width: 500px; margin: 0 auto; }
        label { display: block; margin-bottom: 0.5rem; }
        input, textarea { width: 100%; padding: 0.5rem; margin-bottom: 1rem; border: 1px solid #ccc; border-radius: 4px; }
        button { background-color: #333; color: white; padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background-color: #555; }
        #reviews-list { margin-top: 2rem; }
        .review { background: white; padding: 1rem; margin-bottom: 1rem; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .news-item { background: white; padding: 1rem; margin-bottom: 1rem; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .news-item a { text-decoration: none; color: #333; }
        .news-item a:hover { color: #555; }
        footer { background-color: #333; color: white; text-align: center; padding: 1rem; margin-top: 2rem; }
        
        /* Mobile optimization */
        @media (max-width: 768px) {
            header { padding: 0.5rem; }
            nav { margin-top: 0.5rem; }
            nav a { margin: 0 0.5rem; font-size: 0.9rem; }
            .container { padding: 1rem; }
            .anime-grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 0.5rem; }
            .anime-card { padding: 0.5rem; }
            .anime-card img { height: 150px; }
            form { max-width: 100%; }
            #auth-modal div { padding: 1rem; width: 95%; }
            .news-item { padding: 0.5rem; }
        }
        
        @media (max-width: 480px) {
            h1 { font-size: 1.5rem; }
            h2 { font-size: 1.2rem; }
            h3 { font-size: 1rem; }
            .anime-grid { grid-template-columns: 1fr; }
            button { padding: 0.4rem 0.8rem; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Anime Hub</h1>
        <nav>
            <a href="#home">Home</a>
            <a href="#list">Anime List</a>
            <a href="#reviews">Reviews</a>
            <a href="#news">News</a>
        </nav>
        <div id="auth-section" style="margin-top: 1rem;">
            <button id="login-btn">Login</button>
            <button id="signup-btn">Sign Up</button>
            <span id="user-status"></span>
        </div>
        <div id="auth-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center;">
            <div style="background: white; padding: 2rem; border-radius: 8px; max-width: 400px; width: 90%;">
                <h3 id="modal-title">Login</h3>
                <form id="auth-form">
                    <label for="username">Username:</label><br>
                    <input type="text" id="username" required><br><br>
                    <label for="password">Password:</label><br>
                    <input type="password" id="password" required><br><br>
                    <button type="submit">Submit</button>
                    <button type="button" id="close-modal">Cancel</button>
                </form>
            </div>
        </div>
    </header>
    
    <div class="container" id="home">
        <h2>Welcome to Anime Hub!</h2>
        <p>Discover your next favorite anime series.</p>
        <input type="text" id="search-input" placeholder="Search anime..." style="width: 100%; padding: 0.5rem; margin-bottom: 1rem;">
        <div id="no-results" style="display: none; color: red; text-align: center;">No anime found matching your search.</div>
        
        <h3>Featured Anime</h3>
        <div class="anime-grid">
            <!-- Dynamic content loaded here -->
        </div>
        
        <h3>Submit a Review</h3>
        <form id="review-form" style="display: none;">
            <label for="anime-title">Anime Title:</label><br>
            <input type="text" id="anime-title" required><br><br>
            
            <label for="reviewer-name">Your Name:</label><br>
            <input type="text" id="reviewer-name" required><br><br>
            
            <label for="rating">Rating (1-10):</label><br>
            <input type="number" id="rating" min="1" max="10" required><br><br>
            
            <label for="review-text">Review:</label><br>
            <textarea id="review-text" rows="4" required></textarea><br><br>
            
            <button type="submit">Submit Review</button>
        </form>
        
        <h3>Recent Reviews</h3>
        <div id="reviews-list"></div>
        
        <h3>Latest Anime News</h3>
        <div id="news-list"></div>
    </div>
    
    <footer>
        <p>&copy; 2023 Anime Hub. Follow us on <a href="#" style="color: white;">Twitter</a> | <a href="#" style="color: white;">Reddit</a></p>
    </footer>
    
    <script>
        let currentUser = null;
        
        window.addEventListener('load', () => {
            const loggedInUser = localStorage.getItem('currentUser');
            if (loggedInUser) {
                currentUser = loggedInUser;
                updateUserStatus();
            }
        });
        
        function updateUserStatus() {
            const status = document.getElementById('user-status');
            const reviewForm = document.getElementById('review-form');
            if (currentUser) {
                status.textContent = `Logged in as ${currentUser}`;
                reviewForm.style.display = 'block';
            } else {
                status.textContent = '';
                reviewForm.style.display = 'none';
            }
        }
        
        document.getElementById('login-btn').addEventListener('click', () => showModal('Login'));
        document.getElementById('signup-btn').addEventListener('click', () => showModal('Sign Up'));
        document.getElementById('close-modal').addEventListener('click', () => hideModal());
        
        function showModal(type) {
            document.getElementById('modal-title').textContent = type;
            document.getElementById('auth-modal').style.display = 'flex';
        }
        
        function hideModal() {
            document.getElementById('auth-modal').style.display = 'none';
            document.getElementById('auth-form').reset();
        }
        
        document.getElementById('auth-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const type = document.getElementById('modal-title').textContent;
            
            let users = JSON.parse(localStorage.getItem('users')) || [];
            
            if (type === 'Sign Up') {
                if (users.find(u => u.username === username)) {
                    alert('Username already exists!');
                    return;
                }
                users.push({ username, password });
                localStorage.setItem('users', JSON.stringify(users));
                alert('Sign up successful! Please log in.');
            } else {
                const user = users.find(u => u.username === username && u.password === password);
                if (user) {
                    currentUser = username;
                    localStorage.setItem('currentUser', username);
                    updateUserStatus();
                    hideModal();
                } else {
                    alert('Invalid credentials!');
                }
            }
        });
        
        // Review form functionality
        document.getElementById('review-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('anime-title').value;
            const name = document.getElementById('reviewer-name').value;
            const rating = document.getElementById('rating').value;
            const text = document.getElementById('review-text').value;
            
            const review = { title, name, rating, text, date: new Date().toLocaleDateString() };
            
            let reviews = JSON.parse(localStorage.getItem('animeReviews')) || [];
            reviews.push(review);
            localStorage.setItem('animeReviews', JSON.stringify(reviews));
            
            document.getElementById('review-form').reset();
            displayReviews();
        });
        
        function displayReviews() {
            const reviews = JSON.parse(localStorage.getItem('animeReviews')) || [];
            const list = document.getElementById('reviews-list');
            list.innerHTML = '';
            
            reviews.forEach(review => {
                const div = document.createElement('div');
                div.className = 'review';
                div.innerHTML = `
                    <h4>${review.title} - ${review.rating}/10</h4>
                    <p><strong>${review.name}</strong> (${review.date})</p>
                    <p>${review.text}</p>
                `;
                list.appendChild(div);
            });
        }
        
        // Search functionality
        const searchInput = document.getElementById('search-input');
        const noResults = document.getElementById('no-results');
        
        searchInput.addEventListener('input', function() {
            const query = searchInput.value.toLowerCase();
            const animeCards = document.querySelectorAll('.anime-card');
            let visibleCount = 0;
            
            animeCards.forEach(card => {
                const title = card.querySelector('h4').textContent.toLowerCase();
                if (title.includes(query)) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            noResults.style.display = visibleCount === 0 ? 'block' : 'none';
        });
        
        // API integration
        async function fetchAnimeData() {
            const apiKey = 'YOUR_API_KEY'; // Replace with your MAL API key
            const url = 'https://api.myanimelist.net/v2/anime/ranking?ranking_type=all&limit=10';
            
            try {
                const response = await fetch(url, {
                    headers: {
                        'X-MAL-CLIENT-ID': apiKey
                    }
                });
                const data = await response.json();
                
                const grid = document.querySelector('.anime-grid');
                grid.innerHTML = '';
                
                data.data.forEach(anime => {
                    const card = document.createElement('div');
                    card.className = 'anime-card';
                    card.innerHTML = `
                        <img src="${anime.node.main_picture.medium}" alt="${anime.node.title}">
                        <h4>${anime.node.title}</h4>
                        <p>${anime.node.synopsis ? anime.node.synopsis.substring(0, 100) + '...' : 'No description available.'}</p>
                    `;
                    grid.appendChild(card);
                });
            } catch (error) {
                console.error('Error fetching anime data:', error);
                // Fallback: Add static cards here if needed
            }
        }
        
        // News functionality
        async function fetchAnimeNews() {
            const rssUrl = 'https://www.anime-planet.com/rss/news';
            const proxyUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;
            
            try {
                const response = await fetch(proxyUrl);
                const data = await response.json();
                
                const newsList = document.getElementById('news-list');
                newsList.innerHTML = '';
                
                data.items.slice(0, 5).forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'news-item';
                    div.innerHTML = `
                        <h4><a href="${item.link}" target="_blank">${item.title}</a></h4>
                        <p>${item.description.substring(0, 150)}...</p>
                        <small>${new Date(item.pubDate).toLocaleDateString()}</small>
                    `;
                    newsList.appendChild(div);
                });
            } catch (error) {
                console.error('Error fetching news:', error);
                document.getElementById('news-list').innerHTML = '<p>Unable to load news. Try again later.</p>';
            }
        }
        
        // Load data, reviews, and news on page load
        fetchAnimeData();
        displayReviews();
        fetchAnimeNews();
    </script>
</body>
</html>